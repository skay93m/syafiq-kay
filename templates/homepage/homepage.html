{% extends "base/index.html" %}
{% load static %}
{% load furigana_extras %}
{% block content %}
<div class="container mt-5">
  <!-- Header Section -->
  <div class="text-center mb-5">
    <h1 class="display-4 mb-3">🥷 <ruby>道場<rt>どうじょう</rt></ruby> 🥷</h1>
    <h2 class="h3 text-muted mb-4">Digital Dojo</h2>
    <p class="lead">Where ancient wisdom meets modern technology in the pursuit of mastery.</p>
    <p class="japanese-text jp-text text-center mb-4">
      🥷 <ruby>古代<rt>こだい</rt></ruby>の<ruby>知恵<rt>ちえ</rt></ruby>と<ruby>現代<rt>げんだい</rt></ruby>の<ruby>技術<rt>ぎじゅつ</rt></ruby>が<ruby>熟練<rt>じゅくれん</rt></ruby>の<ruby>追求<rt>ついきゅう</rt></ruby>で<ruby>出会<rt>であ</rt></ruby>う<ruby>場所<rt>ばしょ</rt></ruby>。
    </p>
  </div>

  <!-- Philosophy Section -->
  <div class="row mb-5">
    <div class="col-md-12">
      <div class="card border-primary">
        <div class="card-body text-center">
          <h3 class="card-title mb-3 text-primary">「<ruby>七転<rt>ななころ</rt></ruby>び<ruby>八起<rt>やお</rt></ruby>き」</h3>
          <p class="card-text">Fall seven times, stand up eight.</p>
          <small class="jp-text japanese-text">
            <ruby>薬学<rt>やくがく</rt></ruby>、<ruby>法律<rt>ほうりつ</rt></ruby>、<ruby>技術<rt>ぎじゅつ</rt></ruby>の<ruby>古武術<rt>こぶじゅつ</rt></ruby>を<ruby>修<rt>おさ</rt></ruby>める<ruby>デジタル<rt>Digital</rt></ruby><ruby>侍<rt>さむらい</rt></ruby>
          </small>
        </div>
      </div>
    </div>
  </div>
  <!-- Personal Statement Section -->
  {% if rirekisho %}
  <div class="row mb-5">
    <div class="col-md-12">
      <div class="card">
        <div class="card-header bg-success text-white">
          <h4 class="card-title mb-0">🥷 Personal Statement</h4>
          <h5 class="card-subtitle mb-0 jp-text japanese-text">🥷 <ruby>個人<rt>こじん</rt></ruby><ruby>声明<rt>せいめい</rt></ruby></h5>
        </div>
        <div class="card-body">
          <div class="card-text">{{ rirekisho.personal_statement|markdown }}</div>
          <div class="text-muted">
            <small>
              📅 Created: {{ rirekisho.created_at|date:"M d, Y H:i" }}
            </small>
          </div>
          <div class="text-muted jp-text japanese-text">
            <small>
              📅 <ruby>作成<rt>さくせい</rt></ruby><ruby>日時<rt>にちじ</rt></ruby>: {{ rirekisho.created_at|date:"Y年m月d日 H:i" }}
            </small>
          </div>
        </div>
      </div>
    </div>
  </div>
  {% else %}
  <div class="row mb-5">
    <div class="col-md-12">
      <div class="card border">
        <div class="card-body text-center">
          <h4 class="card-title">🥷 Welcome to the Digital Dojo</h4>
          <p class="card-text">No Rirekisho data available. Please check back later.</p>
          <div class="jp-text japanese-text">
            <h5 class="card-title">🥷 <ruby>デジタル<rt>Digital</rt></ruby><ruby>道場<rt>どうじょう</rt></ruby>へようこそ</h5>
            <p class="card-text"><ruby>履歴書<rt>りれきしょ</rt></ruby><ruby>データ<rt>Data</rt></ruby>が<ruby>利用<rt>りよう</rt></ruby>できません。<ruby>後<rt>あと</rt></ruby>でご<ruby>確認<rt>かくにん</rt></ruby>ください。</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  {% endif %}
  <!-- LinkedIn section removed - now in footer -->
  <!-- Statistics Section -->
  <div class="row mb-5">
    <div class="col-12">
      <h3 class="mb-4 text-center">📊 Dojo Statistics</h3>
      <h4 class="mb-4 jp-text japanese-text text-center">📊 <ruby>道場<rt>どうじょう</rt></ruby><ruby>統計<rt>とうけい</rt></ruby></h4>
    </div>
  </div>
  
  <!-- Statistics Cards -->
  <div class="row mb-5">
    <div class="col-md-3">
      <div class="card border">
        <div class="card-body text-center">
          <h3 class="card-title text-primary">{{ statistics.daily_visitors }}</h3>
          <p class="card-text">Today's Visitors</p>
          <small class="jp-text japanese-text"><ruby>本日<rt>ほんじつ</rt></ruby>の<ruby>訪問者<rt>ほうもんしゃ</rt></ruby></small>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card border">
        <div class="card-body text-center">
          <h3 class="card-title text-success">{{ statistics.total_visitors }}</h3>
          <p class="card-text">Total Visitors</p>
          <small class="jp-text japanese-text"><ruby>総<rt>そう</rt></ruby><ruby>訪問者<rt>ほうもんしゃ</rt></ruby><ruby>数<rt>すう</rt></ruby></small>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card border">
        <div class="card-body text-center">
          <h3 class="card-title text-warning">{{ statistics.weekly_visitors }}</h3>
          <p class="card-text">Weekly Visitors</p>
          <small class="jp-text japanese-text"><ruby>週間<rt>しゅうかん</rt></ruby><ruby>訪問者<rt>ほうもんしゃ</rt></ruby><ruby>数<rt>すう</rt></ruby></small>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card border">
        <div class="card-body text-center">
          <h3 class="card-title text-danger">{{ statistics.total_posts }}</h3>
          <p class="card-text">Total Posts</p>
          <small class="jp-text japanese-text"><ruby>総<rt>そう</rt></ruby><ruby>投稿<rt>とうこう</rt></ruby><ruby>数<rt>すう</rt></ruby></small>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Content Breakdown Section -->
  <div class="row mb-5">
    <div class="col-12">
      <h3 class="mb-4 text-center">📚 Content Arsenal</h3>
      <h4 class="mb-4 jp-text japanese-text text-center">📚 <ruby>コンテンツ<rt>Content</rt></ruby><ruby>武器庫<rt>ぶきこ</rt></ruby></h4>
    </div>
  </div>
  
  <div class="row mb-5 content-arsenal">
    <div class="col-md-4 mb-3 mb-md-0">
      <div class="card border-primary">
        <div class="card-body text-center">
          <h3 class="card-title text-primary">{{ statistics.journal_count }}</h3>
          <p class="card-text">Journal Entries</p>
          <small class="jp-text japanese-text"><ruby>日記<rt>にっき</rt></ruby>エントリー</small>
        </div>
      </div>
    </div>
    <div class="col-md-4 mb-3 mb-md-0">
      <div class="card border-success">
        <div class="card-body text-center">
          <h3 class="card-title text-success">{{ statistics.note_count }}</h3>
          <p class="card-text">Garden Notes</p>
          <small class="jp-text japanese-text"><ruby>ガーデン<rt>Garden</rt></ruby>ノート</small>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card border-info">
        <div class="card-body text-center">
          <h3 class="card-title text-info">{{ statistics.reference_count }}</h3>
          <p class="card-text">References</p>
          <small class="jp-text japanese-text"><ruby>参考<rt>さんこう</rt></ruby><ruby>文献<rt>ぶんけん</rt></ruby></small>
        </div>
      </div>
    </div>
  </div>
  <!-- Tag Cloud Section Removed as requested -->
  <!-- Statistics Update Info -->
  <div class="row mb-5">
    <div class="col-12">
      <div class="card border-secondary stats-update-block">
        <div class="card-body text-center py-4">
          <h5 class="text-muted mb-3">📊 Statistics Information</h5>
          <p class="mb-1">
            Last updated: {{ statistics.today_date|date:"M d, Y" }}
          </p>
          <p class="jp-text japanese-text mb-0">
            <ruby>統計<rt>とうけい</rt></ruby><ruby>更新<rt>こうしん</rt></ruby><ruby>日<rt>び</rt></ruby>: {{ statistics.today_date|date:"Y年m月d日" }}
          </p>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
/* Removed a4-width constraint for full-width layout */

.jp-text {
    font-size: 0.9em;
    color: #666;
}

.japanese-text {
    font-family: 'Noto Sans JP', sans-serif;
}

.card {
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    transition: transform 0.2s ease-in-out;
}

.card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

.tag-cloud-container {
    padding: 1rem;
    background: #f8f9fa;
    border-radius: 8px;
}

.badge {
    font-size: 0.8em;
}

.tag-cloud-item {
  padding: 0.3rem 0.8rem;
  border-radius: 20px;
  font-weight: 600;
  text-decoration: none;
  transition: all 0.3s ease;
  cursor: default;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  margin: 0.2rem;
}

.tag-cloud-item:hover {
  transform: translateY(-2px) scale(1.05);
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  background: linear-gradient(135deg, #E91E63, #FF69B4);
  color: white;
}

/* Tag size variations */
.tag-cloud-item[style*="1.4rem"] {
  background: linear-gradient(135deg, #E91E63, #FF1493);
  color: white;
}

.tag-cloud-item[style*="1.3rem"] {
  background: linear-gradient(135deg, #FF69B4, #FFB6C1);
  color: #333;
}

.tag-cloud-item[style*="1.2rem"] {
  background: linear-gradient(135deg, #FFB6C1, #FFC0CB);
  color: #333;
}

.tag-cloud-item[style*="1.1rem"] {
  background: linear-gradient(135deg, #FFC0CB, #FFE4E1);
  color: #666;
}

.tag-cloud-item[style*="1.0rem"] {
  background: linear-gradient(135deg, #FFE4E1, #FFF0F5);
  color: #888;
}

.tag-count {
  font-size: 0.8em;
  opacity: 0.7;
  margin-left: 0.3rem;
}

/* Responsive Design */
@media (max-width: 768px) {
  .statistics-section {
    padding: 1rem;
  }
  
  .stat-card {
    padding: 1rem;
    margin-bottom: 1rem;
  }
  
  .stat-number {
    font-size: 2rem;
  }
  
  .content-stat {
    flex-direction: column;
    text-align: center;
  }
  
  .content-icon {
    margin-right: 0;
    margin-bottom: 0.5rem;
  }
}

/* Japanese text styling */
.jp-text.japanese-text {
  font-size: 0.9em;
  color: #666;
  font-style: italic;
}

/* Improved contrast for Japanese text on colored backgrounds */
.card.bg-info .jp-text.japanese-text,
.card.bg-secondary .jp-text.japanese-text,
.card.bg-dark .jp-text.japanese-text {
  color: #e9ecef;
}

/* Markdown content styling */
.card-text h2 {
  font-size: 1.5rem;
  margin-top: 1.5rem;
  margin-bottom: 1rem;
  color: #333;
}

.card-text h3 {
  font-size: 1.3rem;
  margin-top: 1.2rem;
  margin-bottom: 0.8rem;
  color: #555;
}

.card-text ul {
  margin-left: 1.5rem;
  margin-bottom: 1rem;
}

.card-text li {
  margin-bottom: 0.5rem;
}

.card-text p {
  margin-bottom: 1rem;
  line-height: 1.6;
}
</style>

{% endblock %}
