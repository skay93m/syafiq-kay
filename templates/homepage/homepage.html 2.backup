{% extends "base/index.html" %}
{% load static %}
{% block content %}
<div class="container a4-width mt-5 justify-content-center">
  {% include "components/banner.html" %}
  
  <!-- Zen Landscape Section -->
  <section class="zen-landscape-section mt-4 mb-4">
    <div class="zen-image-container">
      <img src="https://images.unsplash.com/photo-1506905925346-21bda4d32df4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" 
           alt="Zen landscape with leafless trees near lake and mountains" 
           class="zen-image">
      <div class="zen-caption">
        <p class="ninja-text">
          🍃 Like the ancient trees that stand resilient by the tranquil waters, a ninja's spirit remains unshaken through all seasons of learning and growth.
        </p>
        <p class="ninja-text jp-text">
          🍃 静寂な水辺に立つ古木のように、忍者の精神は学びと成長の全ての季節を通して不動のままです。
        </p>
        <small class="image-source">
          <i class="fas fa-camera"></i> Photo by <a href="https://unsplash.com/photos/leafless-trees-near-lake-and-mountains-during-daytime-gNZ6MHqtsLY" target="_blank" rel="noopener">Unsplash</a>
        </small>
      </div>
    </div>
  </section>
  
  {% if rirekisho %}
    <div class="homepage-jumbotron">
      <div class="text-center">
        <h3 class="ninja-text mb-3 jp-text">🥷 個人声明 | Personal Statement</h3>
        <p class="ninja-text jp-text">{{ rirekisho.personal_statement|linebreaks }}</p>
        <small class="text-muted text-center d-block">
          <span class="jp-text">作成日時: {{ rirekisho.created_at|date:"Y年m月d日 H:i" }}</span>
          <br>
          <span>Created: {{ rirekisho.created_at|date:"jS F Y, H:i" }}</span>
        </small>
      </div>
    </div>
  {% else %}
    <div class="homepage-jumbotron">
      <div class="text-center">
        <h3 class="ninja-text mb-3">🥷 Welcome to the Digital Dojo</h3>
        <p class="ninja-text">No Rirekisho data available. Please check back later.</p>
      </div>
    </div>
  {% endif %}
  
  <!-- LinkedIn Section -->
  <section class="linkedin-section mt-5 mb-4">
    <div class="text-center">
      <h3 class="ninja-text mb-3">🥷 Connect with the Digital Samurai</h3>
      <p class="ninja-text mb-3">
        Join my professional network on LinkedIn, where I share insights about pharmacy, technology, and the art of continuous learning. If there's anything I can help you with, please don't hesitate to send me a message!
      </p>
      <p class="ninja-text mb-4 jp-text">
        LinkedInで私のプロフェッショナルネットワークに参加し、薬学、技術、継続学習の技について洞察を共有しています。何かお手伝いできることがあれば、お気軽にメッセージをお送りください！
      </p>
      <a href="https://www.linkedin.com/in/syafiqkay/" target="_blank" rel="noopener" class="btn btn-linkedin btn-lg">
        <i class="fab fa-linkedin"></i> Connect on LinkedIn
      </a>
    </div>
  </section>
  
  <!-- Statistics Section -->
  <section class="statistics-section mt-5 mb-4">
    <div class="text-center">
      <h3 class="ninja-text mb-4">📊 Dojo Statistics | 道場統計</h3>
      <div class="row">
        <div class="col-lg-3 col-md-6 mb-3">
          <div class="stat-card">
            <div class="stat-icon">
              <i class="fas fa-users"></i>
            </div>
            <div class="stat-content">
              <div class="stat-number">{{ statistics.daily_visitors }}</div>
              <div class="stat-label">
                <span>Today's Visitors</span>
                <br>
                <span class="jp-text">本日の訪問者</span>
              </div>
            </div>
          </div>
        </div>
        
        <div class="col-lg-3 col-md-6 mb-3">
          <div class="stat-card">
            <div class="stat-icon">
              <i class="fas fa-globe"></i>
            </div>
            <div class="stat-content">
              <div class="stat-number">{{ statistics.total_visitors }}</div>
              <div class="stat-label">
                <span>Total Visitors</span>
                <br>
                <span class="jp-text">総訪問者数</span>
              </div>
            </div>
          </div>
        </div>
        
        <div class="col-lg-3 col-md-6 mb-3">
          <div class="stat-card">
            <div class="stat-icon">
              <i class="fas fa-calendar-week"></i>
            </div>
            <div class="stat-content">
              <div class="stat-number">{{ statistics.weekly_visitors }}</div>
              <div class="stat-label">
                <span>Weekly Visitors</span>
                <br>
                <span class="jp-text">週間訪問者数</span>
              </div>
            </div>
          </div>
        </div>
        
        <div class="col-lg-3 col-md-6 mb-3">
          <div class="stat-card">
            <div class="stat-icon">
              <i class="fas fa-scroll"></i>
            </div>
            <div class="stat-content">
              <div class="stat-number">{{ statistics.total_posts }}</div>
              <div class="stat-label">
                <span>Total Posts</span>
                <br>
                <span class="jp-text">総投稿数</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Content Breakdown -->
      <div class="content-breakdown mt-4">
        <h4 class="ninja-text mb-3">📚 Content Arsenal | コンテンツ武器庫</h4>
        <div class="row">
          <div class="col-md-4 mb-3">
            <div class="content-stat">
              <div class="content-icon">
                <i class="fas fa-book"></i>
              </div>
              <div class="content-details">
                <div class="content-number">{{ statistics.journal_count }}</div>
                <div class="content-label">
                  <span>Journal Entries</span>
                  <br>
                  <span class="jp-text">日記エントリー</span>
                </div>
              </div>
            </div>
          </div>
          
          <div class="col-md-4 mb-3">
            <div class="content-stat">
              <div class="content-icon">
                <i class="fas fa-sticky-note"></i>
              </div>
              <div class="content-details">
                <div class="content-number">{{ statistics.note_count }}</div>
                <div class="content-label">
                  <span>Garden Notes</span>
                  <br>
                  <span class="jp-text">ガーデンノート</span>
                </div>
              </div>
            </div>
          </div>
          
          <div class="col-md-4 mb-3">
            <div class="content-stat">
              <div class="content-icon">
                <i class="fas fa-bookmark"></i>
              </div>
              <div class="content-details">
                <div class="content-number">{{ statistics.reference_count }}</div>
                <div class="content-label">
                  <span>References</span>
                  <br>
                  <span class="jp-text">参考文献</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Noto Garden Tag Cloud -->
      {% if statistics.tag_cloud %}
      <div class="tag-cloud-section mt-4">
        <h4 class="ninja-text mb-3">🌸 Garden Tag Cloud | ガーデンタグクラウド</h4>
        <div class="tag-cloud-container">
          {% for tag_data in statistics.tag_cloud %}
            <span class="tag-cloud-item" 
                  style="font-size: {{ tag_data.size }}rem; opacity: {{ tag_data.opacity }}; {% if tag_data.color %}border-left: 3px solid {{ tag_data.color }};{% endif %}">
              {{ tag_data.name }}
              <small class="tag-count">({{ tag_data.count }})</small>
            </span>
          {% endfor %}
        </div>
        <small class="text-muted mt-2 d-block">
          <span class="jp-text">最も使用されているタグ | Most frequently used tags</span>
        </small>
      </div>
      {% endif %}
      
      <small class="text-muted mt-3 d-block">
        <i class="fas fa-chart-line"></i> 
        <span class="jp-text">統計更新日: {{ statistics.today_date|date:"Y年m月d日" }}</span> | 
        <span>Statistics updated: {{ statistics.today_date|date:"jS F Y" }}</span>
      </small>
    </div>
  </section>
</div>

<style>
/* Statistics Section Styles */
.statistics-section {
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  border-radius: 15px;
  padding: 2rem;
  margin: 2rem 0;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.stat-card {
  background: white;
  border-radius: 12px;
  padding: 1.5rem;
  text-align: center;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  transition: all 0.3s ease;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.stat-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 6px 20px rgba(0,0,0,0.15);
}

.stat-icon {
  font-size: 2rem;
  color: #E91E63;
  margin-bottom: 1rem;
}

.stat-content {
  flex: 1;
}

.stat-number {
  font-size: 2.5rem;
  font-weight: bold;
  color: #333;
  margin-bottom: 0.5rem;
}

.stat-label {
  font-size: 0.9rem;
  color: #666;
  line-height: 1.4;
}

.content-breakdown {
  background: rgba(255, 255, 255, 0.7);
  border-radius: 12px;
  padding: 1.5rem;
  margin-top: 2rem;
}

.content-stat {
  display: flex;
  align-items: center;
  background: white;
  border-radius: 10px;
  padding: 1rem;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  transition: all 0.3s ease;
}

.content-stat:hover {
  transform: translateX(5px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.content-icon {
  font-size: 2rem;
  color: #FFB6C1;
  margin-right: 1rem;
  width: 60px;
  text-align: center;
}

.content-details {
  flex: 1;
}

.content-number {
  font-size: 1.8rem;
  font-weight: bold;
  color: #333;
  margin-bottom: 0.3rem;
}

.content-label {
  font-size: 0.85rem;
  color: #666;
  line-height: 1.3;
}

/* Tag Cloud Styles */
.tag-cloud-section {
  background: rgba(255, 255, 255, 0.8);
  border-radius: 12px;
  padding: 1.5rem;
  margin-top: 2rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.tag-cloud-container {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  align-items: center;
  gap: 0.5rem;
  min-height: 120px;
  padding: 1rem;
  background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.tag-cloud-item {
  display: inline-block;
  background: linear-gradient(135deg, #FFB6C1, #FFC0CB);
  color: #333;
  padding: 0.3rem 0.8rem;
  border-radius: 20px;
  font-weight: 600;
  text-decoration: none;
  transition: all 0.3s ease;
  cursor: default;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  margin: 0.2rem;
}

.tag-cloud-item:hover {
  transform: translateY(-2px) scale(1.05);
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  background: linear-gradient(135deg, #E91E63, #FF69B4);
  color: white;
}

/* Tag size variations */
.tag-cloud-item[style*="1.4rem"] {
  background: linear-gradient(135deg, #E91E63, #FF1493);
  color: white;
}

.tag-cloud-item[style*="1.3rem"] {
  background: linear-gradient(135deg, #FF69B4, #FFB6C1);
  color: #333;
}

.tag-cloud-item[style*="1.2rem"] {
  background: linear-gradient(135deg, #FFB6C1, #FFC0CB);
  color: #333;
}

.tag-cloud-item[style*="1.1rem"] {
  background: linear-gradient(135deg, #FFC0CB, #FFE4E1);
  color: #666;
}

.tag-cloud-item[style*="1.0rem"] {
  background: linear-gradient(135deg, #FFE4E1, #FFF0F5);
  color: #888;
}

.tag-count {
  font-size: 0.8em;
  opacity: 0.7;
  margin-left: 0.3rem;
}

/* Responsive Design */
@media (max-width: 768px) {
  .statistics-section {
    padding: 1rem;
  }
  
  .stat-card {
    padding: 1rem;
    margin-bottom: 1rem;
  }
  
  .stat-number {
    font-size: 2rem;
  }
  
  .content-stat {
    flex-direction: column;
    text-align: center;
  }
  
  .content-icon {
    margin-right: 0;
    margin-bottom: 0.5rem;
  }
}

/* Japanese text styling */
.jp-text {
  font-size: 0.9em;
  color: #666;
  font-style: italic;
}
</style>

{% endblock %}
